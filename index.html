<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mayak Finder - –û—Ñ—Ñ–ª–∞–π–Ω</title>
    <meta name="theme-color" content="#667eea">
    <meta name="description" content="–ü–æ–ª–Ω–æ—Å—Ç—å—é –æ—Ñ—Ñ–ª–∞–π–Ω –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –¥–ª—è –ø–æ–∏—Å–∫–∞ –º–∞—è–∫–∞ –ø–æ Bluetooth">
    <link rel="manifest" href="manifest.json">
    <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>üîç</text></svg>">
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
</head>
<body>
    <div class="container">
        <header class="app-header">
            <h1>üîç Mayak Finder</h1>
            <button class="btn-icon" id="settingsBtn" title="–ù–∞—Å—Ç—Ä–æ–π–∫–∏">‚öôÔ∏è</button>
        </header>
        
        <div id="onlineStatus" class="status offline">
            üî¥ –†–µ–∂–∏–º –æ—Ñ—Ñ–ª–∞–π–Ω
        </div>
        
        <button id="connectBtn" class="btn primary">üì° –ü–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è –∫ Bluetooth</button>
        
        <div id="status" class="status">–ù–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–æ</div>
        
        <div class="coordinates">
            <label>–ü–æ—Å–ª–µ–¥–Ω–∏–µ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã –º–∞—è–∫–∞:</label>
            <div id="coordinatesText">–û–∂–∏–¥–∞–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –æ—Ç –º–∞—è–∫–∞...</div>
        </div>
        
  <div class="actions">
    <button id="copyBtn" class="btn secondary" disabled>üìã –ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã</button>
    <button id="openMapBtn" class="btn secondary" disabled>üó∫Ô∏è –û—Ç–∫—Ä—ã—Ç—å –∫–∞—Ä—Ç—É</button>
    <!-- –ù–û–í–ê–Ø –ö–ù–û–ü–ö–ê -->
    <button id="openExternalMapsBtn" class="btn secondary" disabled>üåç –û—Ç–∫—Ä—ã—Ç—å –≤ –∫–∞—Ä—Ç–∞—Ö</button>
    
    <div class="light-controls">
        <button id="lightOnBtn" class="btn success" disabled>üí° –í–∫–ª—é—á–∏—Ç—å —Å–≤–µ—Ç</button>
        <button id="lightOffBtn" class="btn warning" disabled>üîå –í—ã–∫–ª—é—á–∏—Ç—å —Å–≤–µ—Ç</button>
    </div>
    
    <button id="historyBtn" class="btn secondary">üìä –ò—Å—Ç–æ—Ä–∏—è –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç</button>
    <button id="testBtn" class="btn secondary">üß™ –¢–µ—Å—Ç–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ</button>
</div>
    
    <button id="historyBtn" class="btn secondary">üìä –ò—Å—Ç–æ—Ä–∏—è –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç</button>
    <button id="testBtn" class="btn secondary">üß™ –¢–µ—Å—Ç–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ</button>
</div>

        <div class="map-preview">
            <label>–ü—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä –∫–∞—Ä—Ç—ã:</label>
            <div id="mapPreview" class="map">
                <div class="map-placeholder">
                    <div class="map-icon">üó∫Ô∏è</div>
                    <div class="map-text">–î–∞–Ω–Ω—ã–µ –ø–æ—è–≤—è—Ç—Å—è –∑–¥–µ—Å—å –ø–æ—Å–ª–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è</div>
                </div>
            </div>
        </div>
        
        <div class="stats">
            <div class="stat-item">
                <span class="stat-label">–ü–æ–ª—É—á–µ–Ω–æ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç:</span>
                <span id="coordinatesCount">0</span>
            </div>
            <div class="stat-item">
                <span class="stat-label">–í—Ä–µ–º—è —Ä–∞–±–æ—Ç—ã:</span>
                <span id="uptime">00:00:00</span>
            </div>
        </div>
        
        <div class="log">
            <label>–õ–æ–≥ –¥–∞–Ω–Ω—ã—Ö:</label>
            <div id="dataLog"></div>
        </div>
    </div>

    <!-- –ú–æ–¥–∞–ª—å–Ω—ã–µ –æ–∫–Ω–∞ -->
    <div id="settingsModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∏</h2>
                <button class="close-modal">&times;</button>
            </div>
            <div class="modal-body" id="settingsContent"></div>
        </div>
    </div>

    <div id="historyModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>üìä –ò—Å—Ç–æ—Ä–∏—è –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç</h2>
                <button class="close-modal">&times;</button>
            </div>
            <div class="modal-body" id="historyContent"></div>
        </div>
    </div>

    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
    <script src="settings.js"></script>
    <script src="history-manager.js"></script>
    <script src="script.js"></script>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            startUptimeCounter();
            updateOnlineStatus();
        });

        function startUptimeCounter() {
            let startTime = Date.now();
            setInterval(() => {
                const uptime = Date.now() - startTime;
                const hours = Math.floor(uptime / 3600000);
                const minutes = Math.floor((uptime % 3600000) / 60000);
                const seconds = Math.floor((uptime % 60000) / 1000);
                
                document.getElementById('uptime').textContent = 
                    `${hours.toString().padStart(2, '0')}:${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
            }, 1000);
        }

        function updateOnlineStatus() {
            const isOnline = navigator.onLine;
            const statusElement = document.getElementById('onlineStatus');
            
            if (isOnline) {
                statusElement.textContent = 'üü¢ –û–Ω–ª–∞–π–Ω —Ä–µ–∂–∏–º';
                statusElement.className = 'status online';
            } else {
                statusElement.textContent = 'üî¥ –†–µ–∂–∏–º –æ—Ñ—Ñ–ª–∞–π–Ω';
                statusElement.className = 'status offline';
            }
        }

        window.addEventListener('online', updateOnlineStatus);
        window.addEventListener('offline', updateOnlineStatus);
    </script>
</body>
</html>


