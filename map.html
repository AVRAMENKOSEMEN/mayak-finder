<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ö–∞—Ä—Ç–∞ –º–∞—è–∫–∞ - Mayak Finder</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: Arial, sans-serif; height: 100vh; display: flex; flex-direction: column; }
        .header { background: #667eea; color: white; padding: 15px; display: flex; justify-content: space-between; align-items: center; }
        .back-btn { background: rgba(255,255,255,0.2); border: none; color: white; padding: 10px 15px; border-radius: 5px; cursor: pointer; }
        .coordinates { background: #f8f9fa; padding: 10px; text-align: center; font-family: monospace; }
        #map { flex: 1; width: 100%; }
        .offline-message { text-align: center; padding: 50px 20px; }
    </style>
</head>
<body>
    <div class="header">
        <button class="back-btn" onclick="goBack()">‚Üê –ù–∞–∑–∞–¥</button>
        <h2>üó∫Ô∏è –ö–∞—Ä—Ç–∞ –º–∞—è–∫–∞</h2>
    </div>
    
    <div class="coordinates" id="coordinates">
        –ó–∞–≥—Ä—É–∑–∫–∞ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç...
    </div>
    
    <div id="map">
        <div class="offline-message">
            <div style="font-size: 48px;">üó∫Ô∏è</div>
            <h3>–û–Ω–ª–∞–π–Ω –∫–∞—Ä—Ç–∞</h3>
            <p>–î–ª—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ –∫–∞—Ä—Ç—ã —Ç—Ä–µ–±—É–µ—Ç—Å—è –∏–Ω—Ç–µ—Ä–Ω–µ—Ç</p>
            <p>–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –æ—Ñ—Ñ–ª–∞–π–Ω-–Ω–∞–≤–∏–≥–∞—Ç–æ—Ä –¥–ª—è —Ä–∞–±–æ—Ç—ã –±–µ–∑ —Å–µ—Ç–∏</p>
            <button onclick="openOfflineNavigator()" style="background: #667eea; color: white; border: none; padding: 10px 20px; border-radius: 5px; margin-top: 15px; cursor: pointer;">
                üß≠ –û—Ç–∫—Ä—ã—Ç—å –æ—Ñ—Ñ–ª–∞–π–Ω-–Ω–∞–≤–∏–≥–∞—Ç–æ—Ä
            </button>
        </div>
    </div>

    <script>
        function getCoordinates() {
            const urlParams = new URLSearchParams(window.location.search);
            const lat = urlParams.get('lat') || '55.241867';
            const lon = urlParams.get('lon') || '72.908588';
            
            document.getElementById('coordinates').textContent = 
                `–®–∏—Ä–æ—Ç–∞: ${lat}, –î–æ–ª–≥–æ—Ç–∞: ${lon}`;
            
            // –ü—ã—Ç–∞–µ–º—Å—è –∑–∞–≥—Ä—É–∑–∏—Ç—å –æ–Ω–ª–∞–π–Ω –∫–∞—Ä—Ç—É –µ—Å–ª–∏ –µ—Å—Ç—å –∏–Ω—Ç–µ—Ä–Ω–µ—Ç
            if (navigator.onLine) {
                loadOnlineMap(lat, lon);
            }
        }
        
        function loadOnlineMap(lat, lon) {
            const mapContainer = document.getElementById('map');
            mapContainer.innerHTML = `
                <iframe 
                    src="https://www.openstreetmap.org/export/embed.html?bbox=${lon-0.01},${lat-0.01},${lon+0.01},${lat+0.01}&marker=${lat},${lon}&layer=mapnik"
                    width="100%" 
                    height="100%" 
                    frameborder="0"
                    style="border: none;"
                    title="–ö–∞—Ä—Ç–∞ –º–∞—è–∫–∞">
                </iframe>
            `;
        }
        
        function openOfflineNavigator() {
            const urlParams = new URLSearchParams(window.location.search);
            const lat = urlParams.get('lat');
            const lon = urlParams.get('lon');
            window.open(`navigator.html?lat=${lat}&lon=${lon}`, '_blank');
        }
        
        function goBack() {
            window.history.back();
        }
        
        document.addEventListener('DOMContentLoaded', getCoordinates);
    </script>
</body>
</html>
